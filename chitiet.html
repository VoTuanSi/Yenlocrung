<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tin tức & Chia sẻ - Yến Lộc Rừng</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/certifications.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/news.css">
    <link rel="stylesheet" href="css/chitiet.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">YẾN LỘC RỪNG</div>
            <nav class="nav">
                <ul>
                    <li><a href="index.html">Trang chủ</a></li>
                    <li><a href="gioithieu.html">Giới thiệu</a></li>
                    <li><a href="sanpham.html">Sản phẩm</a></li>
                    <li><a href="chungnhanphaply.html">Chứng nhận & Pháp lý</a></li>
                    <li><a href="lienhe.html">Liên hệ</a></li>
                    <li><a href="tintuc.html">Tin tức</a></li>
                </ul>
            </nav>
        </div>
    </header>


    <main class="container article-detail">
        <button class="back-btn" onclick="location.href='tintuc.html'">← </button>
        
        <h1 id="articleTitle">Đang tải bài viết...</h1>
        <p class="article-date" id="articleDate"></p>
        
        <img id="articleImage" src="" alt="Ảnh bài viết" style="display:none;">
        
        <div class="article-body" id="articleBody">
            <p style="text-align:center; padding: 50px 0;">Đang lấy dữ liệu từ hệ thống...</p>
        </div>
        
        <a href="https://www.facebook.com/YenLocRung?mibextid=wwXIfr&rdid=wfUS61O6lzcpKZty&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1EtcfebfgA%2F%3Fmibextid%3DwwXIfr#" target="_blank" class="read-more">Theo dõi trên Fanpage</a>
    </main>

 <footer class="main-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-info">
                <div class="footer-logo">YẾN LỘC RỪNG</div>
                <ul class="contact-list">
                    <li><strong>Địa chỉ:</strong> Tổ 7A, ấp 6, Thanh Sơn, Định Quán, Đồng Nai</li>
                    <li><strong>Hotline:</strong> <a href="tel:0979502951">0979 502 951</a> – <a href="tel:0386794386">0386 794 386</a></li>
                    <li><strong>Zalo:</strong> <a href="https://zalo.me/0979502951" target="_blank">0979 502 951</a></li>
                    <li><strong>Facebook:</strong> <a href="https://www.facebook.com/YenLocRung?mibextid=wwXIfr&rdid=wfUS61O6lzcpKZty&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1EtcfebfgA%2F%3Fmibextid%3DwwXIfr#" target="_blank">Yến Lộc Rừng</a></li>
                </ul>
            </div>
            <div class="footer-products">
                <h3 class="footer-heading">Sản phẩm tiêu biểu</h3>
                <ul>
                    <li><a href="sanpham.html">Bột đậu ngũ hành</a></li>
                    <li><a href="sanpham.html">Bột sương sâm Lamoi-Pro</a></li>
                    <li><a href="sanpham.html">Hà thủ ô đỏ</a></li>
                    <li><a href="sanpham.html">Dầu gội Hương Rừng</a></li>
                </ul>
            </div>
        </div>

    </div>
</footer>

    <script>
        const SHEET_URL = 'https://script.google.com/macros/s/AKfycbw_3TQQo0qeqDrtGKGm4q8VdKGRXUb1VWUXAKYn0upwlp-iMKzOQWruAiuL8VMKQNL-/exec';

        async function loadArticle() {
            const params = new URLSearchParams(window.location.search);
            const id = parseInt(params.get('id'));

            if (isNaN(id) || id < 1) {
                document.getElementById('articleBody').innerHTML = '<p style="color:red; text-align:center;">Lỗi: Không tìm thấy bài viết.</p>';
                return;
            }

            try {
                const response = await fetch(SHEET_URL);
                const data = await response.json();

                // Lấy dữ liệu từ hàng tương ứng (ID hàng 1 = index 0 trong mảng)
                const article = data[id - 1];

                if (!article) {
                    document.getElementById('articleBody').innerHTML = '<p style="text-align:center;">Bài viết không tồn tại.</p>';
                    return;
                }

                // 1. Tiêu đề (Cột A)
                document.getElementById('articleTitle').textContent = article[0] || 'Tiêu đề đang cập nhật';

                // 2. Định dạng Ngày tháng (Cột B)
                let dateDisplay = article[1] || 'Chưa rõ ngày';
                if (dateDisplay.includes('T')) {
                    const d = new Date(dateDisplay);
                    dateDisplay = `${d.getDate().toString().padStart(2, '0')}/${(d.getMonth() + 1).toString().padStart(2, '0')}/${d.getFullYear()}`;
                }
                document.getElementById('articleDate').textContent = 'Ngày đăng: ' + dateDisplay;

                // 3. Hình ảnh (Cột D)
                const imgElement = document.getElementById('articleImage');
                if (article[3] && article[3].trim() !== "") {
                    imgElement.src = article[3];
                    imgElement.style.display = 'block';
                }

                // 4. Nội dung chi tiết (Cột E)
                const content = article[4] && article[4].trim() !== "" 
                    ? article[4] 
                    : '<p>Nội dung đang được cập nhật...</p>';
                document.getElementById('articleBody').innerHTML = content;

            } catch (error) {
                console.error('Lỗi:', error);
                document.getElementById('articleBody').innerHTML = '<p style="color:red; text-align:center;">Lỗi kết nối dữ liệu.</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', loadArticle);
    </script>
</body>
</html>